<!DOCTYPE html>
<html>
	<head>
		<title>Full Stack Evaluation</title>
		<style>
			.record.green {
				color: green;
			}
		</style>
	</head>
	<body>
		<div id="response">

		</div>

		<script>
			function serverResponse () {
				var responseString = this.responseText;
				var records = JSON.parse(responseString);
				var element = document.getElementById('response');

				/*Challenge 2: Render a list of the users' first names into the element with id "response"
				  	from the string that the server returns */
				var list = document.createElement('ul');
				records.forEach(function(record) {
					var item = document.createElement('li');
					item.innerText = record.firstname;

					/*Challenge 3: Alert the users' last name when one of the first names is clicked */
					item.setAttribute('data-last-name', record.lastname);
					item.addEventListener('click', function(e){
						alert(e.target.getAttribute('data-last-name'));
					});

					/*Challenge 4: Have the first names of all users with the 'role' property equal to 'Admin' show with green font color  */
					item.className = 'record' + ( record.role === 'Admin' ? ' green' : '');

					list.appendChild(item);
				});
				
				

				

  				element.appendChild(list);
			}

			function serverError () {
  				document.getElementById('response').innerText = 'An error occured with the server request';
			}


			var req = new XMLHttpRequest();

			req.addEventListener("load", serverResponse);
			req.addEventListener("error", serverError);

			req.open("GET", "http://127.0.0.1:3001");
			req.send();	
		</script>
	</body>
</html>
